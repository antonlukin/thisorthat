"use strict";!function(){function t(e){27===e.keyCode&&(o.classList.remove("feedback--visible"),history.replaceState(null,null," "),document.removeEventListener("keydown",t))}function n(){o.classList.add("feedback--visible"),document.addEventListener("keydown",t)}var o=document.querySelector(".feedback"),s=o.querySelector(".feedback-form");s.addEventListener("submit",function(e){e.preventDefault();var t=s.querySelector(".feedback-submit");t.setAttribute("disabled","disabled"),t.textContent="â€¦";var n=[];n.push(s.querySelector("textarea").value);var c=s.querySelector("input").value;c&&n.push("<b>".concat(c,"</b>"));var a={text:n.join("\n\n")},r=new XMLHttpRequest;r.open("POST","/help/"),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){if(200===r.status)return o.classList.add("feedback--sent"),setTimeout(function(){o.querySelector(".feedback-close").click()},2500);o.classList.add("feedback--error")},r.onerror=function(){o.classList.add("feedback--error")},r.send(JSON.stringify(a))}),o.querySelector(".feedback-close").addEventListener("click",function(e){e.preventDefault(),o.classList.remove("feedback--visible"),history.replaceState(null,null," ")}),document.querySelectorAll('a[href="#feedback"]').forEach(function(e){e.addEventListener("click",function(){n()})}),"#feedback"===document.location.hash&&n()}();