"use strict";!function(){function t(e){27===e.keyCode&&(a.classList.remove("feedback--visible"),history.replaceState(null,null," "),document.removeEventListener("keydown",t))}function c(){a.classList.add("feedback--visible"),document.addEventListener("keydown",t)}var a=document.querySelector(".feedback"),r=a.querySelector(".feedback-form");r.addEventListener("submit",function(e){e.preventDefault();var t=r.querySelector("textarea").value,c=r.querySelector("input").value;c&&(t="Контакт: ".concat(c,"\n")+t);var n=new XMLHttpRequest;n.open("POST",r.dataset.url+t),n.onload=function(){return 200===n.status?a.classList.add("feedback--success"):a.classList.add("feedback--error")},n.send()}),a.querySelector(".feedback-close").addEventListener("click",function(e){e.preventDefault(),a.classList.remove("feedback--visible"),history.replaceState(null,null," ")}),document.querySelectorAll('a[href="#feedback"]').forEach(function(e){e.addEventListener("click",function(){c()})}),"#feedback"===document.location.hash&&c()}();